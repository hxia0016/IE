{% extends 'main.html' %}

{% block content %}

<head>
    <h1>clothing</h1>
    <style>
html,
body,
#map_canvas {
  height: 100%;
  width: 100%;
  margin: 0px;
  padding: 0px
}



    </style>
</head>
<body>

<div>
    <div>
        <form action="{% url 'clothing' %}">
            <label for="site">Clothing Disposal Site</label>
            <select name="CSite" id="site">
                <option value="Melbourne" selected>Melbourne</option>
                <option value="Abbotsford">Abbotsford</option>
                <option value="Alphington">Alphington</option>
                <option value="Altona North">Altona North</option>
                <option value="Ascot Vale">Ascot Vale</option>
                <option value="Ashburton">Ashburton</option>
                <option value="Balwyn">Balwyn</option>
                <option value="Baxter">Baxter</option>
                <option value="Bayswater">Bayswater</option>
                <option value="Beaconsfield">Beaconsfield</option>
                <option value="Bentleigh">Bentleigh</option>
                <option value="Berwick">Berwick</option>
                <option value="Blackburn">Blackburn</option>
                <option value="Boronia">Boronia</option>
                <option value="Box Hill">Box Hill</option>
                <option value="Braybrook">Braybrook</option>
                <option value="Briar Hill">Briar Hill</option>
                <option value="Brighton">Brighton</option>
                <option value="Brooklyn">Brooklyn</option>
                <option value="Brunswick">Brunswick</option>
                <option value="Camberwell">Camberwell</option>
                <option value="Campbellfield">Campbellfield</option>
                <option value="Canterbury">Canterbury</option>
                <option value="Carrum Downs">Carrum Downs</option>
                <option value="Chelsea">Chelsea</option>
                <option value="Cheltenham">Cheltenham</option>
                <option value="Clayton">Clayton</option>
                <option value="Clifton Hill">Clifton Hill</option>
                <option value="Coburg">Coburg</option>
                <option value="Coburg North">Coburg North</option>
                <option value="Collingwood">Collingwood</option>
                <option value="Craigieburn">Craigieburn</option>
                <option value="Cranbourne">Cranbourne</option>
                <option value="Cranbourne North">Cranbourne North</option>
                <option value="Croydon">Croydon</option>
                <option value="Dandenong">Dandenong</option>
                <option value="Deer Park">Deer Park</option>
                <option value="Diamond Creek">Diamond Creek</option>
                <option value="Doncaster">Doncaster</option>
                <option value="Doveton">Doveton</option>
                <option value="Eaglemont">Eaglemont</option>
                <option value="East Kew">East Kew</option>
                <option value="Edithvale">Edithvale</option>
                <option value="Elsternwick">Elsternwick</option>
                <option value="Eltham">Eltham</option>
                <option value="Epping">Epping</option>
                <option value="Essendon">Essendon</option>
                <option value="Fairfield">Fairfield</option>
                <option value="Fawkner">Fawkner</option>
                <option value="Ferntree Gully">Ferntree Gully</option>
                <option value="Flamington">Flamington</option>
                <option value="Footscray">Footscray</option>
                <option value="Frankston">Frankston</option>
                <option value="Glen Huntly">Glen Huntly</option>
                <option value="Glen Iris">Glen Iris</option>
                <option value="Glenroy">Glenroy</option>
                <option value="Greensborough">Greensborough</option>
                <option value="Hampton">Hampton</option>
                <option value="Hampton Park">Hampton Park</option>
                <option value="Hawthorn">Hawthorn</option>
                <option value="Heathmont">Heathmont</option>
                <option value="Heidelberg">Heidelberg</option>
                <option value="Heidelberg West">Heidelberg West</option>
                <option value="Hopers Crossing">Hopers Crossing</option>
                <option value="Hoppers Crossing">Hoppers Crossing</option>
                <option value="Hurstbridge">Hurstbridge</option>
                <option value="Ivanhoe">Ivanhoe</option>
                <option value="Kialla">Kialla</option>
                <option value="Kilsyth">Kilsyth</option>
                <option value="Knoxfield">Knoxfield</option>
                <option value="Kooyong">Kooyong</option>
                <option value="Lalor">Lalor</option>
                <option value="Laverton">Laverton</option>
                <option value="Laverton North">Laverton North</option>
                <option value="Lilydale">Lilydale</option>
                <option value="Lyndhurst">Lyndhurst</option>
                <option value="Macleod">Macleod</option>
                <option value="Malton">Malton</option>
                <option value="Malvern">Malvern</option>
                <option value="Malvern East">Malvern East</option>
                <option value="Melton">Melton</option>
                <option value="Mentone">Mentone</option>
                <option value="Mitcham">Mitcham</option>
                <option value="Mont Albert">Mont Albert</option>
                <option value="Montmorency">Montmorency</option>
                <option value="Moonee Ponds">Moonee Ponds</option>
                <option value="Mooroolbark">Mooroolbark</option>
                <option value="Mordialloc">Mordialloc</option>
                <option value="Mornington">Mornington</option>
                <option value="Mount Eliza">Mount Eliza</option>
                <option value="Mount Waverley">Mount Waverley</option>
                <option value="Mountain Gate">Mountain Gate</option>
                <option value="Mulgrave">Mulgrave</option>
                <option value="Narre Warren">Narre Warren</option>
                <option value="Newport">Newport</option>
                <option value="Niddrie">Niddrie</option>
                <option value="Noble Park">Noble Park</option>
                <option value="North Melbourne">North Melbourne</option>
                <option value="Northcote">Northcote</option>
                <option value="Nunawading">Nunawading</option>
                <option value="Oakleigh">Oakleigh</option>
                <option value="Ormond">Ormond</option>
                <option value="Plenty">Plenty</option>
                <option value="Port Melbourne">Port Melbourne</option>
                <option value="Prahran">Prahran</option>
                <option value="Preston">Preston</option>
                <option value="Ravenhall">Ravenhall</option>
                <option value="Richmond">Richmond</option>
                <option value="Ringwood">Ringwood</option>
                <option value="Ringwood East">Ringwood East</option>
                <option value="Rosanna">Rosanna</option>
                <option value="Rowville">Rowville</option>
                <option value="Roxburgh Park">Roxburgh Park</option>
                <option value="Sandringham">Sandringham</option>
                <option value="Seaford">Seaford</option>
                <option value="Seddon">Seddon</option>
                <option value="Somerton">Somerton</option>
                <option value="South Morang">South Morang</option>
                <option value="Springvale">Springvale</option>
                <option value="St Albans">St Albans</option>
                <option value="St Kilda">St Kilda</option>
                <option value="St. Albans">St. Albans</option>
                <option value="Strathmore">Strathmore</option>
                <option value="Sunbury">Sunbury</option>
                <option value="Sunshine">Sunshine</option>
                <option value="Surrey Hills">Surrey Hills</option>
                <option value="Taylors Lakes">Taylors Lakes</option>
                <option value="Thomastown">Thomastown</option>
                <option value="Wantirna South">Wantirna South</option>
                <option value="Watsonia">Watsonia</option>
                <option value="Werribee">Werribee</option>
                <option value="Williamstown">Williamstown</option>
                <option value="Windsor">Windsor</option>
            </select>
            <input name="Site" type="submit" value="Submit"/>
        </form>

    </div>
    <div>
        {% for clothing in clothings %}
        <h5>{{clothing.name}}--{{clothing.address}}--{{clothing.district}}</h5>
        {% endfor %}
    </div>
</div>
</body>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCgX16AyleX9Cjjnno5uYQKyliz-_NGKO4"></script>
<div id="map_canvas" style="border: 2px solid #3872ac;"></div>


<body>
<script>
    var locations = [];
    var i =0;
    {% for clothing in clothings %}
        locations[i] = "{{clothing.address}}"+","+"{{clothing.district}}";
        i+=1;
    {% endfor %}

    console.log(locations);

var geocoder;
var map;
var bounds = new google.maps.LatLngBounds();

function initialize() {
  map = new google.maps.Map(
    document.getElementById("map_canvas"), {
      center: new google.maps.LatLng( -37, 144),
      zoom: 5,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
  geocoder = new google.maps.Geocoder();

  for (i = 0; i < locations.length; i++) {


    geocodeAddress(locations, i);
  }
}
google.maps.event.addDomListener(window, "load", initialize);

function geocodeAddress(locations, i) {

  var address = locations[i];
  geocoder.geocode({
      'address': locations[i]
    },

    function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        var marker = new google.maps.Marker({
          icon: 'http://maps.google.com/mapfiles/ms/icons/red.png',
          map: map,
          position: results[0].geometry.location,

          animation: google.maps.Animation.DROP,
          address: address

        })
        //infoWindow(marker, map, title, address);
        bounds.extend(marker.getPosition());
        map.fitBounds(bounds);
      }
    });
}



function createMarker(results) {
  var marker = new google.maps.Marker({
    icon: 'http://maps.google.com/mapfiles/ms/icons/blue.png',
    map: map,
    position: results[0].geometry.location,

    animation: google.maps.Animation.DROP,
    address: address
  })
  bounds.extend(marker.getPosition());
  map.fitBounds(bounds);
  return marker;
}



</script>
</body>


{% endblock content %}
